global:
  scrape_interval: 5s
  evaluation_interval: 5s

scrape_configs:
  # Основной REST API сервис
  - job_name: "demo-rest"
    metrics_path: "/actuator/prometheus"
    static_configs:
      - targets: ["demo-rest:8080"]

  # WebSocket сервис уведомлений
  - job_name: "notification-service"
    metrics_path: "/actuator/prometheus"
    static_configs:
      - targets: ["notification-service:8083"]

  # Сервис аудита событий
  - job_name: "audit-service"
    metrics_path: "/actuator/prometheus"
    static_configs:
      - targets: ["audit-service:8082"]

  # gRPC сервис аналитики (метрики на HTTP порту)
  - job_name: "analytics-service"
    metrics_path: "/actuator/prometheus"
    static_configs:
      - targets: ["analytics-service:8081"]

  # Агрегированная группа для общих запросов (опционально)
  - job_name: "demo_app"
    metrics_path: "/actuator/prometheus"
    static_configs:
      - targets:
          - "demo-rest:8080"
          - "notification-service:8083"
          - "audit-service:8082"
          - "analytics-service:8081"
